# 11단원 - CPU 스케줄링

## CPU 스케줄링 개요

- **CPU 스케줄링**

→ 운영체제가 프로세스들에게 공정하고 합리적으로 CPU 자원을 배분하는 방법

⇒ 컴퓨터 성능과 직결된다.

<br>
<br>

- **우선순위**

→ CPU를 할당받을 수 있는 우선순위 (우선순위가 높을수록 빨리 처리해야하는 것)

운영체제는 프로세스별로 부여된 우선순위를 보고 CPU스케줄링을 수행

운영체제는 각 프로세스의  PCB에 우선순위를 명시, PCB에 적힌 우선순위를 기준으로 먼저 처리할 프로세스를 결정.

<br>

대부분의 프로세스들은 CPU와 입출력장치를 모두 사용하며 실행. (실행 상태와 대기 상태를 반복하면서 실행)

⇒ CPU를 사용하여 명령어 실행 → 입력받은 내용을 보조기억장치에 저장 → CPU사용하여 명령어 실행 → 입력한 내용을 화면에 출력 (과정 반복)

![프로세스 실행과정](11단원%20-%20프로세스%20실행과정.png)

프로세스 종류마다 입출력장치를 이용하는 시간과 CPU를 이용하는 시간의 양에는 차이가 있다.

<ins>입출력 집중 프로세스</ins>: 입출력 작업이 많은 프로세스 (비디오 재생, 디스크 백업 작업 등)

<ins>CPU 집중 프로세스</ins>: CPU작업이 많은 프로세스 (복잡한 수학 연산, 컴파일, 그래픽 처리 작업 담당 등)

<br>

+) CPU버스트: CPU를 이용하는 작업

입출력 버스트: 입출력장치를 기다리는 작업

프로세스는 일반적으로 CPU 버스트와 입출력 버스트를 반복하며 실행된다고 볼 수 있다.

<br>
<br>

if) CPU 집중 프로세스와 입출력 집중 프로세스가 동시에 CPU자원을 요구 했을 때

⇒ 입출력 집중 프로세스를 가능한 한 빨리 실행시켜 입출력장치를 끊임없이 작동, 

그 다음 CPU 집중 프로세스에서 집중적으로 CPU를 할당하는 것이 더 효율적.

입출력장치가 입출력 작업을 완료하기 전까지는 입출력 집중 프로세스는 어차피 대기 상태가 될 예정. 때문에 입출력 집중 프로세스를 얼른 먼저 처리해 버리면 다른 프로세스가 CPU를 사용할 수 있기 때문

<br>

+) 우선순위가 높은 프로세스로는 실시간 프로세스, 일부 백그라운드 프로세스 등 다양.

유닉스, 리눅스, macOS 등의 유닉스 운영체제: ps -el 명렁어로 확인, nice로 우선순위 변경

윈도우: Process Explorer 소프트웨어로 확인

<br>
<br>

- **스케줄링 큐**

→ 운영체제가 메모리로 적재되고 싶은 (새로 생성되는), CPU를 이용하고싶은, 특정 입출력장치를 이용하고 싶은 프로세스들을 큐에 삽입하여 줄 세우는 것

(반드시 선입선출일 필요는 없다)

운영체제가 관리하는 대부분의 자원은 큐로 관리된다.

![스케줄링 큐](11단원%20-%20스케줄링%20큐.png)

- **준비 큐**

→ CPU 할당을 기다리는 프로세스들을 위한 큐

큐에 삽입된 순서대로 프로세스를 하나씩 꺼내어 실행하되, 우선순위가 높은 프로세스를 먼저 실행한다.

<br>

- **대기 큐**

→ 입출력장치를 기다리는 프로세스들을 위한 큐

같은 장치를 요구한 프로세스들 끼리 대기큐에서 대기

입출력이 완료되어 완료 인터럽트가 발생하면 운영체제는 대기 큐에서 작업이 완료된 PCB를 찾고, PCB를 준비 상태로 변경하여 준비 큐로 이동시킨 뒤 대기 큐에서 제거

<br>
<br>

- **선점형 스케줄링**

→ 프로세스가 이용 중인 자원을 빼앗을 수 있는 스케줄링 방식 (어느 하나의 프로세스가 자원 사용을 독점할 수 없는 스케줄링 방식 / ex: 일정한 시간 할당)

대부분의 운영체제가 차용하는 방식

장점: 한 프로세스이 자원 독점을 막고 프로세스들에게 고른 자원 배분 가능

단점: 문맥 교환 과정에서 오버헤드가 발생할 수 있다.

<br>

- **비선점형 스케줄링**

→ 자원을 빼앗을 수 없는 스케줄링 방식 (자원 독점할 수 있는 스케줄링 방식)

장점: 문맥 교환 횟수가 적어 오버헤드가 날 가능성이 줄어든다.

단점: 당장 자원을 사용해야할 급한 상황에도 기다리는 수밖에 없다.

모든 프로세스의 고른 자원 분배가 안된다.

<br>
<br>
<br>