# 9단원 - 운영체제 시작하기

## 운영체제를 알아야하는 이유

<br>

시스템 자원 (= 자원): 프로그램 실행에 마땅히 필요한 요소들

- **운영체제**

→ 실행할 프로그램에 필요한 자원을 할당하고, 프로그램이 올바르게 실행되도록 돕는 특별한 프로그램

<br>

프로그램이라 메모리에 적제된다. 커널 영역에 적재되어 실행된다.

실행되는 응용 프로그램들을 메모리에 적재하고, 더 이상 실행되지 않는 프로그램을 메모리에서 삭제하며 지속적으로 메모리 자원을 관리 한다.

실행되는 여러 프로그램들에게 공정하게 CPU자원을 할당한다.

입출력 장치를 두 개 이상의 프로그램들이 사용하려고 할 때, 하나의 프로그램이 이용하는 동안 다른 프로그램을 기다리게 만들어 입출력 자원을 관리한다.

<br>

⇒ 응용 프로그램과 하드웨어 사이에서 응용 프로그램에 필요한 자원을 할당하고, 응용 프로그램이 올바르게 실행되도록 관리하는 역할을 맡는다.

자원의 효율적 배분. 규칙제정하여 컴퓨터 시스템 전체 관리. 관리할 자원별로 기능이 나뉘어있음.

<br>
<br>

<ins>커널 영역</ins>: 컴퓨터가 부팅될 때 메모리 내 운영체제가 적재되어 실행되는 공간

<ins>사용자 영역</ins>: 사용자가 이용하는 응용 프로그램이 적재되는 영역

⇒ 커널영역에 적재되어 사용자 영역에 적재된 프로그램들에 자원을 할당하고 올바르게 실행되도록 돕는다.

<br>

+) 응용 프로그램: 사용자가 특정 목적을 위해 사용하는 일반적인 프로그램

<br>
<br>

- <ins>최종적으로</ins>

⇒ 운영체제가 하드웨어의 상태나 코드가 어떻게 실행되었는지, 어떤 문제가 있었는지 등을 알려준다 (ex. 오류 메세지). 이를 통해 문제 해결의 실마리를 찾을 수 있다.

하드웨어와 프로그램을 더 깊게 이해하고, 운영체제에 제대로 된 명령을 내릴 수 있다.

<br>
<br>
<br>

## 운영체제의 큰 그림

- **커널**

→ 운영체제의 핵심 기능을 담당 하는 영역

자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능

![커널 구조](9단원%20-%20커널.jpg)

<br>

- <ins>운영 체제 제공, 커널에 포함되지 않는 서비스</ins>
1. <ins>사용자 인터페이스</ins>: 사용자가 컴퓨터와 상호작용할 수 있는 통로
2. <ins>그래픽 유저 인터페이스</ins>: 그래픽을 기반으로 컴퓨터와 상호작용할 수 있는 인터페이스
3. <ins>커맨드 라인 인터페이스</ins>: 명령어를 기반으로 상호작용할 수 있는 인터페이스

<br>

운영체제는 사용자가 실행하는 응용프로그램이 하드웨어 자원에 직접 접근하는 것을 방지하여 자원을 보호.

응용 프로그램의 요청 (운영체제 코드를 실행) → 운영체제가 응용 프로그램 대신 자원에 접근하여 요청한 작업 수행.

<br>
<br>

- **이중 모드**

→ CPU가 명령어를 모드를 커널 모드와 사용자 모드로 구분하는 방식

**사용자 모드**: 운영체제 서비스를 제공받을 수 없는 실행 모드. 

(커널 영역의 코드를 실행할 수 없는 모드. 하드웨어 자원에 접근하는 명령어 실행 X. 일반적인 응용프로그램 실행 모드)

**커널 모드**: 운영체제 서비스를 제공받을 수 있는 실행 모드 

(커널 영역의 코드를 실행할 수 없는 모드. 자원 접근 명령어를 비롯한 모든 명령어를 실행할 수 있다. 운영체제 실행 모드)

<br>
<br>

- **시스템 호출**

→ 운영체제의 서비스를 제공받기 위해 커널 모드로 전환하기 위한 요청

사용자 모드로 실행되는 프로그램은 시스템 호출을 통해 커널 모드로 전환하여 운영체제 서비스를 제공받을 수 있다.

+) 소프트웨어 인터럽트: 인터럽트를 발생시키는 특정 명령어에 의해 발생하는 인터럽트

![시스템 호출 1](9단원%20-%20시스템%20호출%201.png)

![시스템 호출 2](9단원%20-%20시스템%20호출%202.png)

<br>
<br>

### 운영체제 (커널)의 핵심 서비스

- <ins>프로세스 (= 실행 중인 프로그램) 관리</ins>

→ 컴퓨터를 사용하는 동안 메모리 안에서는 새로운 프로세스들이 생성되고, 사용되지 않는 프로세스는 메모리에서 삭제.

CPU는 프로세스들을 조금씩 번갈아 가며 실행한다.

각 프로세스마다 자원, 상태등이 다양하기 때문에 다양한 프로세스를 일목요연하게 관리하고 실행할 수 있어야한다.

<br>

- <ins>자원 접근 및 할당</ins>

→ 운영체제는 프로세스들이 사용할 자원에 접근하고 조작함으로써 프로세스에 필요한 자원을 할당해준다.

CPU: 운영체제가 프로세스들에 공정하게 CPU를 할당하기위해 순서, 사용시간등을 결정 (CPU스케줄링)

메모리: 새로운 프로세스가 적재될 때 마다 어느 주소에 적재해야할지를 결정.

입출력장치: 인터럽트 서비스 루틴을 제공, 입출력작업 수행

<br>

- <ins>파일 시스템 관리</ins>

파일 시스템: 파일을 열고, 생성, 삭제, 파일들을 묶어 디렉터리(폴더)로 관리

<br>
<br>

+) 가상머신과 이중모드

컴퓨터에 설치된 운영체제에서 가상 머신을 설치 및 실행한다면, 그 가상머신 또한 응용프로그램. → 사용자 모드로 작동

⇒ 가상화를 지원하는 CPU는 가상머신을 위한 모드인 하이퍼 바이저 모드를 따로 지원

하이퍼 바이저 모드로인해 가상 머신에 설치된 운영ㅊ제로부터 운영체제 서비스를 받을 수 있다.

<br>
<br>

+) 시스템 호출의 종류

→ 운영체제 서비스를 제공받기 위한 방법. 깊은 이해를 위해 필요

운영체제에서 사용하는 대표적인 시스템 호출의 종류

| 종류 | 시스템 호출 | 설명 |
| --- | --- | --- |
| 프로세스 관리 | fork() | 새 자식 프로세스 생성 |
|  | execve() | 프로세스 실행 (메모리 공간을 새로운 프로그램의 내용으로 덮어씌움) |
|  | exit() | 프로세스 종료 |
|  | waitpid() | 자식 프로세스가 종료할 때까지 대기 |
| 파일 관리 | open() | 파일 열기 |
|  | clase() | 파일 닫기 |
|  | read() | 파일 읽기 |
|  | write() | 파일 쓰기 |
|  | stat() | 파일 정보 획득 |
| 디렉터리 관리 | chdir() | 작업 디렉터리 변경 |
|  | mkdir() | 디렉터리 생성 |
|  | rmdir() | 비어있는 디렉터리 삭제 |
| 파일 시스템 관리 | mount() | 파일 시스템 마운트 |
|  | umount() | 파일 시스템 마운트 해제 |